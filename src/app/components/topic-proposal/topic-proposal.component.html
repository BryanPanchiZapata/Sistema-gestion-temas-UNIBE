<div id="proposal" fxLayout="column" fxLayoutAlign="center center">
  <mat-card class="container__form" ngClass.lt-sm="mat-card-lt-sm" fxLayout="column" fxLayoutAlign="center center">
    <img src="../../../assets/unibe_form.png" alt="UNIBE" />
    <h2 class="form__title">PROPUESTA DE TEMA</h2>
    <form [formGroup]="proposalForm">
      <div fxLayout="column" fxLayoutAlign="center start">
        <h4>Tema de trabajo de titulación:</h4>
        <p>
          {{topicStudent?.topic?.name}}
        </p>

        <h4>Descripción breve del tema:</h4>
        <mat-form-field appearance="fill">
          <textarea matInput formControlName="topicDescription" id="topicDescription" type="text" cols="100" wrap="hard"
            autocapitalize="sentences" required></textarea>
          <mat-error *ngIf="proposalForm.get('topicDescription')?.hasError('required')">Campo
            <strong>obligatorio</strong>
          </mat-error>
        </mat-form-field>

        <h4>Objetivo general:</h4>
        <mat-form-field appearance="fill">
          <textarea matInput formControlName="objectiveGeneral" id="objectiveGeneral" type="text" cols="100" wrap="hard"
            autocapitalize="sentences" required>
          </textarea>
          <mat-error *ngIf="proposalForm.get('objectiveGeneral')?.hasError('required')">Campo
            <strong>obligatorio</strong>
          </mat-error>
        </mat-form-field>

        <h4>Objetivos específicos:</h4>
        <div formArrayName="objectivesSpecific" class="objective">
          <button class="secondary no-margin-left" type="button" mat-raised-button (click)="addObjectivesSpecific()">
            <mat-icon>add</mat-icon>Agregar
          </button>
          <ng-container *ngFor="let objective of objectivesSpecific.controls; let i = index">
            <mat-form-field appearance="fill">
              <textarea matInput [formControlName]="i" type="text" cols="100"
                wrap="hard" autocapitalize="sentences" required>
                </textarea>
              <mat-error *ngIf="objectivesSpecific.errors">Campo
                <strong>obligatorio</strong>
              </mat-error>
            </mat-form-field>
            <div>
              <button mat-raised-button class="no-margin-left" (click)="removeObjectivesSpecific(i)">
                <mat-icon>remove</mat-icon>Remover
              </button>
            </div>
          </ng-container>
        </div>
        <h4>Justificación breve del estudio:</h4>
        <mat-form-field appearance="fill">
          <textarea matInput formControlName="studyJustification" id="studyJustification" cols="100" wrap="hard"
            autocapitalize="sentences" type="text" required></textarea>
          <mat-error *ngIf="proposalForm.get('studyJustification')?.hasError('required')">Campo
            <strong>obligatorio</strong>
          </mat-error>
        </mat-form-field>
      </div>
      <mat-card-actions fxLayout="row" fxLayoutAlign="center center">
        <button mat-raised-button (click)="onCancel()">Cancelar</button>
        <button type="submit" class="primary" mat-raised-button (click)="onCreateProposal()">
          Enviar
        </button>
      </mat-card-actions>
    </form>
  </mat-card>
</div>
