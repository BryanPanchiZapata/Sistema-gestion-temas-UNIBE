<mat-stepper linear #stepper fxLayout="column" fxLayoutAlign="center center">
  <mat-step [stepControl]="ciStudentControl">
    <ng-template matStepLabel>Evaluación de Propuesta de Tema</ng-template>
    <form fxLayout="column" fxLayoutAlign="center center">
      <mat-form-field class="form-evaluation" appearance="fill">
        <mat-label>Identificación del estudiante</mat-label>
        <input matInput text="text" [formControl]="ciStudentControl" required
          placeholder="Ingrese el número de identificación">
        <mat-error *ngIf="ciStudentControl.hasError('required')">Campo <strong>obligatorio</strong>
        </mat-error>
        <button *ngIf="ciStudentControl" matSuffix mat-icon-button (click)="onFindByStudent()">
          <mat-icon class="button-icon">search</mat-icon>
        </button>
        <button *ngIf="ciStudentControl" matSuffix mat-icon-button (click)="onReset()">
          <mat-icon class="button-icon">close</mat-icon>
        </button>
      </mat-form-field>
    </form>

    <div *ngIf="topicStudent.student?.ci" fxLayout="column" fxLayoutAlign="center center">
      <div class="find-student" fxLayout="column" fxLayoutAlign="start start">
        <p><strong>Estudiante:</strong> {{topicStudent.student?.firstName}} {{topicStudent.student?.secondName}}
          {{topicStudent.student?.lastName}} {{topicStudent.student?.secondLastname}}</p>
        <p><strong>Carrera:</strong> {{topicStudent.topic?.career?.name}}</p>
        <p><strong>Tema:</strong> {{topicStudent.topic?.name}}</p>
      </div>
      <form>
        <mat-form-field class="form-evaluation" appearance="legacy">
          <mat-label>Evaluación de la Propuesta de Tema</mat-label>
          <mat-select required [formControl]="evaluationControl">
            <mat-option *ngFor="let evaluation of evaluations | keyvalue" [value]="evaluation.value">
              {{evaluation.key}}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="evaluationControl.hasError('required')">Campo <strong>obligatorio</strong>
          </mat-error>
        </mat-form-field>
      </form>
      <button [disabled]="evaluationControl.invalid" class="primary" mat-raised-button matStepperNext
        (click)="onEvaluationProposal()">Siguiente</button>
    </div>
  </mat-step>
  <mat-step>
    <ng-template matStepLabel>Notificación de aprobación</ng-template>
    <ng-template matStepContent>
      <mat-card class="container__form" ngClass.lt-sm="mat-card-lt-sm">
        <figure class="unibe__form">
          <img src="../../../assets/unibe_form.png" alt="UNIBE" />
        </figure>
        <div class="form__inicio">
          <div>
            <p class="form__oficio">OFICIO N°</p>
            <input class="input" type="number" required />
          </div>
          <div>
            <p>Quito, D.M. {{day}} de {{month}} del {{year}}</p>
          </div>
        </div>
        <div class="form__texts">
          <mat-form-field>
            <mat-label>Tratamiento</mat-label>
            <mat-select>
              <mat-option *ngFor="let title of titles | keyvalue" [value]="title.value">
                {{title.key}}
              </mat-option>
            </mat-select>
          </mat-form-field>
          <p><b>{{ topicStudent.student?.firstName }} {{ topicStudent.student?.secondName }} {{
              topicStudent.student?.lastName }} {{ topicStudent.student?.secondLastname }}</b></p>

          <p class="spacing">Presente.</p>
          <p>De nuestras consideraciones:</p>
          <p>Por medio de la presente el Comité de Grado de la Carrera de
            <b>{{ topicStudent.student?.career?.degree }}</b>
            de la Universidad Iberoamericana del Ecuador (UNIB.E), en reunión
            ordinaria No.
            <input class="input" type="text" placeholder="01-2020" required />
            fecha
            <input class="form__date" type="date" required />, le informa que su propuesta de investigación titulada:
            <b> {{ topicStudent.topic?.name }}</b> ha sido: <b>aprobado.</b>
          </p>

          <div *ngIf="topicStudent.topicEvaluation === 'APROBADO_CON_OBSERVACIONES'">
            <p>Aprobado con las siguientes observaciones:</p>
            <textarea cols="20" rows="10"></textarea>
          </div>
          <div *ngIf="topicStudent.topicEvaluation === 'REPROBABO'">
            <p>No ha sido aprobado por los siguientes motivos:</p>
            <textarea cols="20" rows="10"></textarea>
          </div>
          <p>Elaborado por:</p>
          <img class="firma">

          <mat-card-actions fxLayout="row" fxLayoutAlign="center center">
            <button mat-raised-button>Imprimir</button>
            <button type="submit" class="primary" mat-raised-button>
              Enviar
            </button>
          </mat-card-actions>
        </div>
      </mat-card>
    </ng-template>
  </mat-step>
