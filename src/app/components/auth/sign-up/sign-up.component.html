<div class="container" fxLayout="column" fxLayoutAlign="center center">
  <mat-card fxLayout="column" fxLayoutAlign="center center" class="auth-form">

    <form [formGroup]="roleForm">
      <mat-form-field appearance="legacy" class="auth-full-width">
        <mat-label>Rol que desempeña</mat-label>
        <mat-select required formControlName="role">
          <mat-option *ngFor="let role of userRoles | keyvalue" [value]="role.value">
            {{role.key}}
          </mat-option>
        </mat-select>
        <mat-error *ngIf="roleForm.get('role')!.hasError('required')">Campo <strong>requerido</strong>
        </mat-error>
      </mat-form-field>
    </form>

    <form [formGroup]="careerForm"
      *ngIf="roleForm.get('role')!.value === 'STUDENT' || roleForm.get('role')!.value === 'CAREER_DIRECTOR' ">
      <mat-form-field appearance="legacy" class="auth-full-width">
        <mat-label>Carrera</mat-label>
        <mat-select required formControlName="career">
          <mat-option *ngFor="let career of careers" [value]="career">
            {{career.name}}
          </mat-option>
        </mat-select>
        <mat-error *ngIf="careerForm.get('career')!.hasError('required')">Campo <strong>requerido</strong>
        </mat-error>
      </mat-form-field>
    </form>

    <mat-form-field appearance="legacy" class="auth-full-width">
      <mat-label>Tipo de identificación</mat-label>
      <mat-select required #typeI="ngModel" ngModel="typeId">
        <mat-option *ngFor="let type of typesId | keyvalue" [value]="type.key">{{type.key}}</mat-option>
      </mat-select>
    </mat-form-field>

    <form fxLayout="column" [formGroup]="registerForm">
      <mat-form-field appearance="legacy" class="auth-full-width">
        <mat-label>Identificación</mat-label>
        <div fxLayout="row">
          <input matInput text="text" required formControlName="ci"
            placeholder="Ingrese el número de su identificación">
        </div>
        <mat-error *ngIf="typeI.value === '0' && registerForm.get('ci')!.hasError('validateCi')">Número de
          identificación <strong>no
            válida</strong></mat-error>
      </mat-form-field>

      <table class="auth-full-width" cellspacing="0">
        <tr>
          <td>
            <mat-form-field appearance="legacy" class="auth-full-width">
              <mat-label>Primer nombre</mat-label>
              <input matInput text="text" required formControlName="firstName" placeholder="Ingrese su primer nombre">
              <mat-error *ngIf="registerForm.get('firstName')!.hasError('required')">Campo
                <strong>requerido</strong>
              </mat-error>
            </mat-form-field>
          </td>
          <td>
            <mat-form-field appearance="legacy" class="auth-full-width">
              <mat-label>Segundo Nombre</mat-label>
              <input matInput text="text" formControlName="secondName" placeholder="Ingrese su segundo nombre">
            </mat-form-field>
          </td>
        </tr>
      </table>
      <table class="auth-full-width" cellspacing="0">
        <tr>
          <td>
            <mat-form-field appearance="legacy" class="auth-full-width">
              <mat-label>Primer Apellido</mat-label>
              <input matInput text="text" required formControlName="lastName" placeholder="Ingrese su primer apellido">
              <mat-error *ngIf="registerForm.get('lastName')!.hasError('required')">Campo
                <strong>requerido</strong>
              </mat-error>
            </mat-form-field>
          </td>
          <td>
            <mat-form-field appearance="legacy" class="auth-full-width">
              <mat-label>Segundo Apellido</mat-label>
              <input matInput text="text" formControlName="secondLastname" placeholder="Ingrese su segundo apellido">
            </mat-form-field>
          </td>
        </tr>
      </table>
      <mat-form-field appearance="legacy" class="auth-full-width">
        <mat-label>Email</mat-label>

        <input type="email" matInput type="email" required formControlName="email"
          placeholder="Ingrese su correo electrónico institucional">

        <mat-error *ngIf="registerForm.get('email')!.hasError('required')">Campo <strong>requerido</strong>
        </mat-error>
        <mat-error *ngIf="registerForm.get('email')!.hasError('pattern')">Email <strong>inválido</strong>
        </mat-error>
      </mat-form-field>
      <table class="auth-full-width" cellspacing="0">
        <tr>
          <td>
            <mat-form-field appearance="legacy" class="auth-full-width">
              <mat-label>Contraseña</mat-label>
              <input [type]="hide ? 'password' : 'text'" matInput formControlName="password" required
                placeholder="Ingrese una contraseña">
              <button mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'"
                [attr.aria-pressed]="hide">
                <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
              </button>
              <mat-error *ngIf="registerForm.get('password')!.hasError('required')">Campo
                <strong>requerido</strong>
              </mat-error>
              <mat-error *ngIf="registerForm.get('password')!.hasError('minlength')">La contraseña debe contener
                <strong>mínimo 8 caracteres</strong>
              </mat-error>
            </mat-form-field>
          </td>
          <td>
            <mat-form-field appearance="legacy" class="auth-full-width">
              <mat-label>Confirmar contraseña</mat-label>
              <input [type]="hide ? 'password' : 'text'" matInput placeholder="Ingrese nuevamante la contraseña"
                required>
              <button mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'"
                [attr.aria-pressed]="hide">
                <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
              </button>
            </mat-form-field>
          </td>
        </tr>
      </table>
    </form>

    <div fxLayout="row" fxFlexAlign="center">
      <button mat-raised-button class="button" type="submit" (click)="onSignUpAdmini()"
      *ngIf="roleForm.get('role')!.value === 'FINANCIAL' || roleForm.get('role')!.value === 'AUTHORITY' "
        [disabled]="registerForm.invalid">Registarse</button>
      <button mat-raised-button class="button" type="submit" (click)="onSignUpAcademic()"
      *ngIf="roleForm.get('role')!.value === 'STUDENT' || roleForm.get('role')!.value === 'CAREER_DIRECTOR' "

        [disabled]="registerForm.invalid">Registarse
      </button>

    </div>

  </mat-card>
</div>
